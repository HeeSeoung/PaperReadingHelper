{%load static%}
<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>EPRH - English Paper Reading Helper</title>
    <link href="{% static 'css/mainpage.css' %}" rel="stylesheet">

    <!-- Custom fonts for this template-->
    <link href="{% static 'vendor/fontawesome-free/css/all.min.css' %}" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
    
    <!-- Custom styles for this template-->
    <link href="{% static 'css/sb-admin-2.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">    

  </head>

  <body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">            
      <!-- Sidebar -->      

      <!-- End of Sidebar -->

      <!-- Content Wrapper -->
      <div id="content-wrapper" class="d-flex flex-column">

        <!-- Main Content -->
        <div id="content">

          <!-- Topbar -->
          {% include 'includes/header.html' %}
          <!-- End of Topbar -->

          <!-- Begin Page Content -->
          <div class="col-xl-12 col-lg-12 mb-4">            
            <script>
              function loadFile(input) {
                  let file = input.files[0];	//선택된 파일 가져오기
                  //미리 만들어 놓은 div에 text(파일 이름) 추가
                  let name = document.getElementById('input_text_name');
                  name.innerHTML = `<mark> 파일 이름: ${file.name} </mark>`
                  let btn = document.getElementById("btn-upload");                
                  btn.disabled = false;
              };
            </script>
            <div class="row" id="mainpage_img_container">
              <img src="{%static 'img/mainpage_bg3.jpg'%}" class="pr-0 pl-0">
              <input class="file-upload-input" type='file' accept=".pdf" id="customFile" onchange="loadFile(this);"/>
              <div id="mainpage_img_text">
                <h3 class="drag-text font-weight-bold">Pdf파일을 클릭이나 드래그해서 업로드 하세요!</h3>
                <div id="input_text_name"></div>
                <button class="btn btn-primary mt-3" type="button" id="btn-upload" data-toggle="modal" data-target="#myModal" disabled>업로드 하기</button>
              </div>              
            </div>
          </div>                
          <div class="modal fade" id="myModal" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <!-- <div class="modal-header">
                  <h5 class="modal-title" id="staticBackdropLabel">Modal title</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div> -->
                <div class="modal-body">
                  <div class="container">                    
                    <div class="row">
                      <div class="col">
                        <div class="loadingio-spinner-ellipsis-rbw7d6zpjdh">
                          <div class="ldio-rqkh75aee3j">
                          <div></div><div></div><div></div><div></div><div></div>
                          </div></div>                        
                      </div>
                    </div>
                    <div class="row text-center">
                      <div class="col">
                        업로드, 텍스트 인식이 진행 중 입니다
                      </div>                      
                      <button type="button" class="btn btn-secondary mt-2" data-dismiss="modal">Close</button>
                    </div>
                  </div>
                  </div>
                <!-- <div class="modal-footer">
                  <button type="button" class="btn btn-primary">Understood</button>
                </div> -->
              </div>
            </div>
          </div>   
          <div class="modal fade" id="myModal-trans" data-keyboard="false" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="staticBackdropLabel">번역</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <div class="container" id='trans-area'>                    
                    <div class="row">
                      <div class="col">
                        <div class="loadingio-spinner-ellipsis-rbw7d6zpjdh">
                          <div class="ldio-rqkh75aee3j">
                          <div></div><div></div><div></div><div></div><div></div>
                          </div></div>                        
                      </div>
                    </div>
                    <div class="row text-center">
                      <div class="col">
                        번역이 진행 중 입니다
                      </div>                      
                      <button type="button" class="btn btn-secondary mt-2" data-dismiss="modal">Close</button>
                    </div>
                  </div>
                  </div>
                <!-- <div class="modal-footer">
                  <button type="button" class="btn btn-primary">Understood</button>
                </div> -->
              </div>
            </div>
          </div>              
          <div class="row">
            <div class="col-xl-2 col-lg-2"></div>
            <div class="col-xl-4 col-lg-4">
              <div class="card shadow mb-4 text-center">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3 font-weight-bolder">
                  OCR 텍스트
                </div>                
                <div class="card-body">
                  <p id="paper-text" class="mb-0" style='height: 500px; overflow:auto;'></p>
                  <div id="text_area" align="center">              
                    <button class="btn btn-primary d-none" type="button" id="btn-trans" data-toggle="modal" data-target="#myModal-trans">
                      변역하기
                    </button>
                    <a href='#' class="btn btn-primary d-none" type="button" id="btn-visual">
                      시각화
                    </a>        
                  </div>
                </div>                
              </div>
            </div>
            <div class="col-xl-4 col-lg-4">
              <div class="card shadow mb-4 text-center">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3 font-weight-bolder">
                  업로드 한 이미지
                </div>                
                <div class="card-body">                  
                  <img id="paper-img" style='height: 500px; width: 100%;'>
                  <br>
                </div>                
              </div>
            </div>
            <div id="img-area" align="center">              
              <!-- <button class="btn btn-primary" type="button" id="btn-upload">
                유사 논문 찾기
              </button>                     -->
              <button class="btn btn-primary flex" type="button" id="btn-prev">이전</button>
              <button class="btn btn-primary flex" type="button" id="btn-next">다음</button>
              <br>
              
            </div>
            <div class="col-xl-2 col-lg-2"></div>
          </div>


        </div>
        <!-- End of Main Content -->

        <!-- Footer -->
        {% include 'includes/footer.html' %}
        <!-- End of Footer -->

      </div>
      <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
      <i class="fas fa-angle-up"></i>
    </a>

    <div class="modal fade" id="translation-modal" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document" style="max-width: 500px">
        <div class="modal-content position-relative">
          <div class="position-absolute top-0 end-0 mt-0 me-0 z-index-1"></div>
          <div class="modal-body p-0 align-item-center">
            <div class="rounded-top-lg py-3 bg-light" align="center">
              <h4 class="mb-1">
                Translated Text
              </h4>
            </div>
            <div class="row flex-between-end">
              <div class="col-auto flex-lg-grow-1 flex-lg-basis-0 align-self-center">
                <p id="translated-text" class="mb-0" style='height: 500px; overflow:auto;'></p>
              </div>
            </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
          </div>
        </div>
      </div>
    </div>


    <!-- Bootstrap core JavaScript-->
    <script src="{% static 'vendor/jquery/jquery.min.js' %}" defer="defer"></script>
    <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}" defer="defer"></script>

    <!-- Core plugin JavaScript-->
    <script src="{% static 'vendor/jquery-easing/jquery.easing.min.js' %}" defer="defer"></script>

    <!-- Custom scripts for all pages-->
    <script src="{% static 'js/sb-admin-2.min.js' %}" defer="defer"></script>
    <script src="{% static 'js/upload/script_upload.js' %}" defer="defer"></script>
    <script src="{% static 'js/mainpage.js' %}" defer="defer"></script>
  </body>

</html>